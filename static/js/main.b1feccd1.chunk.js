(this["webpackJsonpmemory-game"]=this["webpackJsonpmemory-game"]||[]).push([[0],{30:function(e,t,a){e.exports=a(56)},40:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(14),o=a.n(c),i=a(8),s=(a(40),a(11)),l=a(12),u=a.n(l),m=a(21),d=a(22),p=a(16),f=a.n(p);a(43);f.a.initializeApp({apiKey:"AIzaSyDiaPYEVSwz33J4SKqO5ZaBj6aaaZY0wQ8",authDomain:"superior-speech-therapy.firebaseapp.com",databaseURL:"https://superior-speech-therapy.firebaseio.com",projectId:"superior-speech-therapy"});var h=f.a.firestore(),v=a(29),g=a(17),b=a(27),y=a.n(b),E=Object(g.b)({name:"game",initialState:null,reducers:{setGame:function(e,t){return t.payload},updateGameState:function(e,t){if(e){var a=Object.fromEntries(Object.entries(t.payload).map((function(e){var t,a=Object(v.a)(e,2),n=a[0],r=a[1];r&&"sentinel"in r&&(r=(t=y.a.firestore.FieldValue)[r.sentinel].apply(t,Object(s.a)(r.args)));return["state."+n,r]})));h.collection("games").doc(e.id).update(a)}return e}}}),C=E.actions,w=C.setGame,j=C.updateGameState,O=E.reducer;function G(){var e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Object(s.a)(Array(6)).map((function(){return e.charAt(Math.floor(Math.random()*e.length))})).join("")}function _(e){return function(t){e.onSnapshot((function(a){var n=a.data()||null;n&&(n.id=e.id),t(w(n))}))}}a(53);var S=a(28),k=a.n(S),x=(a(54),function(e){var t=k()("Card",e.selected?"Card__front":"Card__back",{Card__hidden:e.matched});return r.a.createElement("div",{onClick:e.onClick,className:t},e.selected&&e.value)});var A={updateGameState:j},N=Object(i.b)(null,A)((function(e){var t=e.game,a=e.updateGameState;return r.a.createElement("div",{className:"Game"},r.a.createElement("div",{className:"Game__info"},r.a.createElement("h2",null,"Game ID: ",t.webId)),r.a.createElement("div",{className:"Game__table"},t&&t.props.cards.map((function(e,n){return r.a.createElement("div",{key:n.toString(),style:{order:t.props.order[n]}},r.a.createElement(x,{value:e,selected:t.state.selectedCards.indexOf(n)>-1,matched:t.state.matchedCards.indexOf(n)>-1,onClick:function(){return function(e,t,a){var n=t.state.selectedCards;if(!(n.length>=2)&&(n=e===n[0]?[]:n.concat(e),a({selectedCards:n}),2===n.length)){var r=t.props.cards[n[0]]===t.props.cards[n[1]];setTimeout((function(){return function(e,t,a){var n={selectedCards:[]};e&&(n.matchedCards={sentinel:"arrayUnion",args:t});a(n)}(r,n,a)}),2e3)}}(n,t,a)}}))}))))})),I=(a(55),{createGame:function(e,t){return function(){var a=Object(m.a)(u.a.mark((function a(n){var r,c,o,i;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return void 0===t&&(t={cards:Object(s.a)(Array(24)).map((function(e,t){return Math.floor(t/2).toString()})),order:Object(d.shuffle)(Object(d.range)(24))}),r={selectedCards:[],matchedCards:[]},c=G(),o={type:e,webId:c,props:t,state:r},a.next=6,h.collection("games").add(o);case 6:i=a.sent,n(_(i));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},loadGame:function(e){return function(){var t=Object(m.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.collection("games").where("webId","==",e).limit(1).get();case 2:(n=t.sent).empty||(r=n.docs[0].ref,a(_(r)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),M=Object(i.b)((function(e){return{game:e.game}}),I)((function(e){var t=e.game,a=e.createGame,n=e.loadGame;return r.a.createElement("div",{className:"App"},t?r.a.createElement(N,{game:t}):r.a.createElement("div",{className:"App__login"},r.a.createElement("div",{className:"App__login_input"},r.a.createElement("h2",null,"Enter your game code:"),r.a.createElement("input",{type:"text",maxLength:6,autoFocus:!0,autoComplete:"off",onChange:function(e){6===e.target.value.length&&n(e.target.value.toUpperCase())}})),r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return a("memory")}},r.a.createElement("small",null,"Start a new game")))))})),B={game:O},D=Object(g.a)({reducer:B});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:D},r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.b1feccd1.chunk.js.map